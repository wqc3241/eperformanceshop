(function(a){a(document).ready(function(){a("body").on("click",".azirspares_image_menu",function(b){b.preventDefault();var g=a(this),f=g.data("item_id"),c,d={className:"media-frame rwmb-file-frame",multiple:true};c=wp.media(d);c.open();c.off("select");c.on("select",function(){var e=c.state().get("selection").first().toJSON();g.closest(".image-field").find("img.preview").attr("src",e.url).attr("alt",e.alt);g.closest(".image-field").find(".image_input").val(e.id);if(g.hasClass("icon_image")){var h='<img class="image-icon" src="'+e.url+'" alt="azirspares" />';var i=a("#menu-item-"+f).find(".menu-item-title").text();a("#menu-item-"+f).find(".menu-item-title").html(h+i)}})});a(document).on("change",".item_icon_type input",function(){var b=a(this).val();if(b=="fonticon"){a(this).closest(".container-megamenu").find(".field-fonticon").show();a(this).closest(".container-megamenu").find(".group-image").hide()}if(b=="image"){a(this).closest(".container-megamenu").find(".field-fonticon").hide();a(this).closest(".container-megamenu").find(".group-image").show()}if(b=="none"){a(this).closest(".container-megamenu").find(".field-fonticon").hide();a(this).closest(".container-megamenu").find(".group-image").hide()}});a(document).on("click",".button-select-icon",function(d){var b=a(this),f=a(this).data("id"),c={action:"megamenu_load_font_icon",id:f};b.addClass("loading");a.post(ajaxurl,c,function(e){a.magnificPopup.open({items:{src:e,type:"inline"}});b.removeClass("loading")});d.preventDefault()});a(document).on("click",".font-item",function(){var c=a(this).data("icon");var d=a(this).data("id");var b='<span class="icon '+c+'"></span>';a("#font-icon-preview-"+d).html(b);a("#menu-item-font-icon-"+d).val(c);var e=a("#menu-item-"+d).find(".menu-item-title").text();a("#menu-item-"+d).find(".menu-item-title").html(b+e);a(this).closest(".icons-popup").find("button.mfp-close").click()});a(document).on("change keyup",".azirspares-icon-search",function(){var c=a(this).val(),b=a(this).closest(".icons-popup").find(".font-item");b.each(function(){var d=a(this);if(d.data("icon").search(new RegExp(c,"i"))<0){d.hide()}else{d.show()}})})})})(jQuery);